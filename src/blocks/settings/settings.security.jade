.row.no-gutter.settings-panel.ng-cloak(ng-controller="CtrlSettingsSecurity")
	form.settings.col-xs-12.col-xs-offset-6(name="updatePass")
		.form-wrap
			h4 {{'MAIN.SETTINGS.SECURITY.TITLE_CHANGE_PASSWORD' | translate}}
			ul.list-group
				li.list-group-item
					.text-control
						label {{'MAIN.SETTINGS.SECURITY.LB_CURRENT_PASSWORD' | translate}}
						input.form-control(type='password', ng-model="form.oldPassword")
				li.list-group-item
					.text-control
						label {{'MAIN.SETTINGS.SECURITY.LB_NEW_PASSWORD' | translate}}
						input.form-control(type='password', ng-model="form.password")
					.text-control
						label {{'MAIN.SETTINGS.SECURITY.LB_CONFIRM_PASSWORD' | translate}}
						input.form-control(type='password', ng-model="form.passwordRepeat", match="form.password")
					.text-control.btn-control
						button.btn.btn-block.btn-primary(type="button", ng-disabled="updatePass.$invalid", ng-click="changePassword()", ng-autodisable) {{'MAIN.SETTINGS.SECURITY.BTN_CONFIRM' | translate}}
				
				li.list-group-item(ng-show="passwordUpdateStatus")
					.text-control
						label(ng-bind="passwordUpdateStatus")
						input.form-control
			div(ng-repeat="key in keys")
				h4 {{'MAIN.SETTINGS.SECURITY.LB_KEY_PAIR_FOR' | translate}}
					span.invert.serif ˝
					span(ng-bind="key.user")
					span.serif ˝
				//- ul.list-group
				//- 	li.list-group-item
				//- 		.text-control
				//- 			label {{'MAIN.SETTINGS.SECURITY.LB_KEY_ID' | translate}}
				//- 			input.form-control(type='text', disabled, ng-value="key.keyId")
				//- 	li.list-group-item
				//- 		.text-control
				//- 			label {{'MAIN.SETTINGS.SECURITY.LB_FINGERPRINT' | translate}}
				//- 			textarea.form-control.disable-styles(rows='3', disabled, ng-bind="key.fingerprint", style="resize: none;")
				//- 	li.list-group-item
				//- 		.text-control
				//- 			label {{'MAIN.SETTINGS.SECURITY.LB_CREATION_DATE' | translate}}
				//- 			input.form-control(type='text', disabled, ng-value="key.created | date")
				//- 	li.list-group-item
				//- 		.text-control
				//- 			label(ng-show="key.isDecrypted") {{'MAIN.SETTINGS.SECURITY.LB_DECRYPTED' | translate}}
				//- 			label(ng-show="!key.isDecrypted") {{'MAIN.SETTINGS.SECURITY.LB_PASSPHRASE' | translate}}
				//- 			input.form-control(type='password', ng-disabled="key.isDecrypted", ng-model="key.decryptPassword", ng-controller="CtrlSettingsSecurityKey")
				//- 	li.list-group-item
				//- 		.text-control
				//- 			.btn.btn-block.btn-primary(ng-click="downloadKey(key)") {{'MAIN.SETTINGS.SECURITY.BTN_DOWNLOAD' | translate}}
				ul.list-group
					li.list-group-item
						div.input-group.with-label.clickable
							button.btn.btn-remove(ng-click="remove()")
								span.icon-delete
							label(ng-click="key.switchCollapse(key)") {{'MAIN.SETTINGS.SECURITY.LB_KEY_ID' | translate}}: {{key.keyId}} 
							input.form-control.text-right(type='text', disabled, ng-value="key.created | date", ng-click="key.switchCollapse(key)")
							div.input-group-btn(ng-click="key.switchCollapse(key)")
								button.btn.btn-default
									span.icon-key-pair
						li.list-group-item.pack(collapse="key.isCollapsed")
							ul.child-item
								li.list-group-item
									.text-control
										label {{'MAIN.SETTINGS.SECURITY.LB_KEY_ID' | translate}}
										input.form-control(type='text', disabled, ng-value="key.keyId")
								li.list-group-item
									.text-control
										label {{'MAIN.SETTINGS.SECURITY.LB_FINGERPRINT' | translate}}
										textarea.form-control.disable-styles(rows='2', disabled, ng-bind="key.fingerprint", style="resize: none;")
								li.list-group-item
									.text-control
										label {{'MAIN.CONTACTS.LB_ALGORITHMS' | translate}}
										input.field-icon.form-control(disabled, ng-model="currentEmail.key.algos")
								li.list-group-item
									.text-control
										label {{'MAIN.SETTINGS.SECURITY.LB_CREATION_DATE' | translate}}	
										input.form-control(type='text', disabled, ng-value="key.created | date")
								li.list-group-item
									.button-holder
										button.cell.btn.btn-default(type="button", ng-click="downloadKey(key)")
											span.icon-arrow-down
											| {{'MAIN.SETTING.SECURITY.BACKUP_KEY_PAIR' | translate}}
										button.cell.btn.btn-default(type="button", ng-click="")
											span.icon-trash
											| {{'MAIN.SETTING.SECURITY.SEND_PUBLIC_KEY' | translate}}

			div(ng-show="isAnyUndecryptedKeys") {{'MAIN.SETTINGS.SECURITY.LB_PASSPHRASE_NOTE' | translate}}
			div(ng-show="!keys || keys.length < 1") {{'MAIN.SETTINGS.SECURITY.LB_KEY_NOTE' | translate}}
			h4 {{'MAIN.SETTINGS.SECURITY.TITLE_KEYS_MANAGEMENT' | translate}}
			ul.list-group
				li.list-group-item
					.text-control.btn-control
						.btn.btn-block.btn-warning(ng-click="generateKeys()") {{'MAIN.SETTINGS.SECURITY.BTN_GENERATE_KEYS' | translate}}
						.btn.btn-block.btn-warning(ng-click="removeDecryptedKeys()", ng-disabled="!keys || keys.length < 1") {{'MAIN.SETTINGS.SECURITY.BTN_REMOVE_DECRYPTED_KEYS' | translate}}
						.btn.btn-block.btn-primary(ng-click="exportKeys()", ng-disabled="!keys || keys.length < 1") {{'MAIN.SETTINGS.SECURITY.BTN_EXPORT_KEYS' | translate}}
						.btn.btn-block.btn-primary(open-file="importKeys(data)") {{'MAIN.SETTINGS.SECURITY.BTN_IMPORT_KEYS' | translate}}
			ul.list-group
			li.list-group-item
				label {{'MAIN.SETTINGS.SECURITY.LAVABOOM_SYNC' | translate}}
				.control
					label.switch
						input(type='checkbox', ng-model="settings.isLavaboomSynced")
						i